(this["webpackJsonpstarter-restaurant-reservation-front-end"]=this["webpackJsonpstarter-restaurant-reservation-front-end"]||[]).push([[0],{35:function(e,t,r){},36:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(18),s=r.n(c),i=r(6),l=r(4),b=r(0);var o=function(){return Object(b.jsx)("nav",{className:"navbar navbar-dark align-items-start p-0",children:Object(b.jsxs)("div",{className:"container-fluid d-flex flex-column p-0",children:[Object(b.jsx)(l.b,{className:"navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0",to:"/",children:Object(b.jsx)("div",{className:"sidebar-brand-text mx-3",children:Object(b.jsx)("span",{children:"Periodic Tables"})})}),Object(b.jsx)("hr",{className:"sidebar-divider my-0"}),Object(b.jsxs)("ul",{className:"nav navbar-nav text-light",id:"accordionSidebar",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(l.b,{className:"nav-link",to:"/dashboard",children:[Object(b.jsx)("span",{className:"oi oi-dashboard"}),"\xa0Dashboard"]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(l.b,{className:"nav-link",to:"/search",children:[Object(b.jsx)("span",{className:"oi oi-magnifying-glass"}),"\xa0Search"]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(l.b,{className:"nav-link",to:"/reservations/new",children:[Object(b.jsx)("span",{className:"oi oi-plus"}),"\xa0New Reservation"]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(l.b,{className:"nav-link",to:"/tables/new",children:[Object(b.jsx)("span",{className:"oi oi-layers"}),"\xa0New Table"]})})]}),Object(b.jsx)("div",{className:"text-center d-none d-md-inline",children:Object(b.jsx)("button",{className:"btn rounded-circle border-0",id:"sidebarToggle",type:"button"})})]})})},j=r(2),u=r.n(j),d=r(5),h=r(3),m=/\d\d\d\d-\d\d-\d\d/;function O(e){return"".concat(e.getFullYear().toString(10),"-").concat((e.getMonth()+1).toString(10).padStart(2,"0"),"-").concat(e.getDate().toString(10).padStart(2,"0"))}function p(){return O(new Date)}function x(e){var t=e.split("-"),r=Object(h.a)(t,3),n=r[0],a=r[1],c=r[2],s=new Date(n,a-=1,c);return s.setMonth(s.getMonth()),s.setDate(s.getDate()-1),O(s)}function v(e){var t=e.split("-"),r=Object(h.a)(t,3),n=r[0],a=r[1],c=r[2],s=new Date(n,a-=1,c);return s.setMonth(s.getMonth()),s.setDate(s.getDate()+1),O(s)}function f(e){return e.reservation_date=e.reservation_date.match(m)[0],e}function N(e){return Array.isArray(e)?e.map(f):f(e)}var g="http://localhost:5001",y=new Headers;function _(e,t,r){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(t,r,n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,r);case 3:if(204!==(a=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,a.json();case 8:if(!(c=e.sent).error){e.next=11;break}return e.abrupt("return",Promise.reject({message:c.error}));case 11:return e.abrupt("return",c.data);case 14:if(e.prev=14,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=19;break}throw console.error(e.t0.stack),e.t0;case 19:return e.abrupt("return",Promise.resolve(n));case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(g,"/reservations")),Object.entries(t).forEach((function(e){var t=Object(h.a)(e,2),r=t[0],a=t[1];return n.searchParams.append(r,a.toString())})),e.next=4,_(n,{headers:y,signal:r},[]).then(N).then(N);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(g,"/reservations/").concat(t)),e.next=3,_(n,{headers:y,signal:r},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(u.a.mark((function e(t,r){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g,"/reservations"),t.people=Number(t.people),a={method:"POST",headers:y,body:JSON.stringify({data:t}),signal:r},e.next=5,_(n,a);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return R.apply(this,arguments)}function R(){return(R=Object(d.a)(u.a.mark((function e(t,r){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g,"/tables"),a={method:"POST",headers:y,body:JSON.stringify({data:t}),signal:r},e.next=4,_(n,a);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(g,"/tables")),e.next=3,_(r,{headers:y,signal:t},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,r){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function e(t,r,n){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"/tables/").concat(t,"/seat"),c={method:"PUT",headers:y,body:JSON.stringify({data:{reservation_id:r}}),signal:n},e.next=4,_(a,c);case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return J.apply(this,arguments)}function J(){return(J=Object(d.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(g,"/tables/").concat(t,"/seat")),a={method:"DELETE",headers:y,body:JSON.stringify({data:{table_id:t}}),signal:r},e.next=4,_(n,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,r){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(u.a.mark((function e(t,r,n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/reservations/").concat(t,"/status")),c={method:"PUT",headers:y,body:JSON.stringify({data:{status:r}}),signal:n},e.next=4,_(a,c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g,"/reservations/?mobile_number=").concat(t),e.next=3,_(n,{signal:r}).then(N).then(N);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,r){return H.apply(this,arguments)}function H(){return(H=Object(d.a)(u.a.mark((function e(t,r,n){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"/reservations/").concat(t,"/edit"),r.people=Number(r.people),c={method:"PUT",headers:y,body:JSON.stringify({data:r}),signal:n},e.next=5,_(a,c);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y.append("Content-Type","application/json");var z=function(e){var t=e.error;return t&&Object(b.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})};var G=function(){return new URLSearchParams(Object(i.h)().search)};var K=function(e){var t=e.reservations,r=(e.date,e.handleCancel),n=t.map((function(e,t){return"finished"!==e.status||"cancelled"!==e.status?Object(b.jsxs)("tr",{className:"res-text table-row",children:[Object(b.jsx)("td",{children:e.reservation_id}),Object(b.jsx)("td",{children:e.first_name}),Object(b.jsx)("td",{children:e.last_name}),Object(b.jsx)("td",{children:e.mobile_number}),Object(b.jsx)("td",{children:e.reservation_date}),Object(b.jsx)("td",{children:e.reservation_time}),Object(b.jsx)("td",{children:e.people}),Object(b.jsx)("td",{children:Object(b.jsx)("p",{"data-reservation-id-status":e.reservation_id,children:e.status})}),Object(b.jsx)("td",{children:"booked"!==e.status?null:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.b,{to:"/reservations/".concat(e.reservation_id,"/seat"),className:"btn btn-primary mx-1",children:"Seat"}),Object(b.jsx)(l.b,{to:"/reservations/".concat(e.reservation_id,"/edit"),className:"btn btn-primary mx-1",children:"Edit"}),Object(b.jsx)("button",{"data-reservation-id-cancel":e.reservation_id,className:"btn btn-danger",type:"button",onClick:function(){return r(e)},children:"Cancel"})]})})]},t):null}));return Object(b.jsx)("div",{children:Object(b.jsx)("div",{children:Object(b.jsxs)("table",{className:"table table-striped",children:[Object(b.jsx)("thead",{className:"thread-dark",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Reservation ID"}),Object(b.jsx)("th",{children:"First Name"}),Object(b.jsx)("th",{children:"Last Name"}),Object(b.jsx)("th",{children:"Mobile Number"}),Object(b.jsx)("th",{children:"Reservation Date"}),Object(b.jsx)("th",{children:"Reservation Time"}),Object(b.jsx)("th",{children:"People"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{children:"Actions"})]})}),Object(b.jsx)("tbody",{children:n})]})})})};var Q=function(e){var t=e.tables,r=e.handleFinish,n=t.map((function(e,t){return e.occupied||e.reservation_id?Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.table_id}),Object(b.jsx)("td",{children:e.table_name}),Object(b.jsx)("td",{children:e.capacity}),Object(b.jsx)("td",{children:e.reservation_id}),Object(b.jsx)("td",{children:Object(b.jsx)("p",{"data-table-id-status":e.table_id,children:"Occupied"})}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{"data-table-id-finish":e.table_id,className:"btn btn-primary",type:"",onClick:function(){return r(e)},children:"Finish"})})]},t):Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.table_id}),Object(b.jsx)("td",{children:e.table_name}),Object(b.jsx)("td",{children:e.capacity}),Object(b.jsx)("td",{children:e.reservation_id}),Object(b.jsx)("td",{children:Object(b.jsx)("p",{className:"col","data-table-id-status":e.table_id,children:"Free"})}),Object(b.jsx)("td",{})]},t)}));return Object(b.jsx)("div",{children:Object(b.jsx)("div",{children:Object(b.jsxs)("table",{className:"table table-striped",children:[Object(b.jsx)("thead",{className:"thread-dark",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Table ID"}),Object(b.jsx)("th",{children:"Table Name"}),Object(b.jsx)("th",{children:"Capacity"}),Object(b.jsx)("th",{children:"Reservation ID"}),Object(b.jsx)("th",{children:"Occupied"}),Object(b.jsx)("th",{children:"Actions"})]})}),Object(b.jsx)("tbody",{children:n})]})})})};var V=function(){var e=Object(i.g)(),t=Object(n.useState)([]),r=Object(h.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(null),o=Object(h.a)(s,2),j=o[0],m=o[1],O=Object(n.useState)([]),f=Object(h.a)(O,2),N=f[0],g=f[1],y=Object(n.useState)([]),_=Object(h.a)(y,2),w=_[0],k=_[1],C=Object(n.useState)(null),D=Object(h.a)(C,2),T=D[0],F=D[1],R=p(),P=G().get("date");function E(){return(E=Object(d.a)(u.a.mark((function t(r){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.table_id,a=r.reservation_id,!window.confirm("Is this table ready to seat new guests? This cannot be undone.")){t.next=14;break}return t.prev=3,t.next=6,q(n);case 6:return t.next=8,L(a,"finished");case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),k([t.t0]);case 13:e.push("/");case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.reservation_id,!window.confirm("Do you want to cancel this reservation? This cannot be undone.")){t.next=12;break}return t.prev=3,t.next=6,L(n,"cancelled");case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),F([t.t0]);case 11:e.push("/");case 12:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}return P&&(R=P),Object(n.useEffect)((function(){var e=new AbortController;return m(null),k(null),function(e,t){return S.apply(this,arguments)}({date:R},e.signal).then(c).catch(m),M(e.signal).then(g).catch(k),function(){return e.abort()}}),[R]),Object(b.jsxs)("main",{children:[Object(b.jsx)("h1",{children:"Dashboard"}),Object(b.jsx)("div",{className:"d-md-flex mb-3",children:Object(b.jsxs)("h4",{className:"mb-0",children:["Reservation for date: ",R]})}),Object(b.jsxs)("div",{className:"contrainer",children:[Object(b.jsx)(l.b,{to:"/dashboard/?date=".concat(x(R)),className:"btn btn-dark",children:"Previous"}),Object(b.jsx)(l.b,{to:"/dashboard",className:"btn btn-dark",children:"Today"}),Object(b.jsx)(l.b,{to:"/dashboard/?date=".concat(v(R)),className:"btn btn-dark",children:"Next"})]}),Object(b.jsx)("br",{}),Object(b.jsx)(z,{error:j}),Object(b.jsx)(z,{error:w}),Object(b.jsx)(z,{error:T}),Object(b.jsx)(K,{reservations:a,date:R,handleCancel:function(e){return A.apply(this,arguments)}}),Object(b.jsx)("br",{}),Object(b.jsx)(Q,{tables:N,handleFinish:function(e){return E.apply(this,arguments)}})]})};var W=function(){return Object(b.jsx)("div",{className:"NotFound",children:Object(b.jsx)("h1",{children:"Not Found"})})},X=r(12),Z=r(8);var $=function(e){var t=e.formData,r=e.handleChange,n=e.handleSubmit,a=Object(i.g)();return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"mr-2",htmlFor:"first_name",children:"First Name:"}),Object(b.jsx)("input",{type:"text",id:"first_name",className:"form-control",name:"first_name",onChange:r,value:t.first_name,required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"mr-2",htmlFor:"last_name",children:"Last Name:"}),Object(b.jsx)("input",{type:"text",id:"last_name",className:"form-control",name:"last_name",onChange:r,value:t.last_name,required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"mr-2",htmlFor:"mobile_number",children:"Mobile Number:"}),Object(b.jsx)("input",{type:"tel",id:"mobile_number",className:"form-control",name:"mobile_number",onChange:r,value:t.mobile_number,required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"mr-2",htmlFor:"reservation_date",children:"Date of Reservation (Closed on Tuesdays):"}),Object(b.jsx)("input",{type:"date",placeholder:"YYYY-MM-DD",pattern:"\\d{4}-\\d{2}-\\d{2}",id:"reservation_date",className:"form-control",name:"reservation_date",onChange:r,value:t.reservation_date,required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"mr-2",htmlFor:"reservation_time",children:"Time of Reservation:"}),Object(b.jsx)("input",{type:"time",placeholder:"HH:MM",pattern:"[0-9]{2}:[0-9]{2}",id:"reservation_time",className:"form-control",name:"reservation_time",onChange:r,value:t.reservation_time,required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"mr-2",htmlFor:"people",children:"Number of People:"}),Object(b.jsx)("input",{type:"number",id:"people",className:"form-control",name:"people",onChange:r,value:t.people,required:!0})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary mr-1 mb-3",children:"Submit"}),Object(b.jsx)("button",{className:"btn btn-secondary mr-1 mb-3",onClick:function(){return a.push("/")},children:"Cancel"})]})})};var ee=function(){var e=Object(i.g)(),t=Object(n.useState)(Object(Z.a)({},{first_name:"",last_name:"",mobile_number:"",reservation_date:"",reservation_time:"",people:"1",status:"booked"})),r=Object(h.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(!1),l=Object(h.a)(s,2),o=l[0],j=l[1],m=function(){var t=Object(d.a)(u.a.mark((function t(r){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),n=new AbortController,t.prev=2,t.next=5,D(a,n.signal);case 5:c=t.sent,e.push("/dashboard/?date=".concat(c.reservation_date.slice(0,10))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),j(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Create a New Reservation"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(z,{error:o}),Object(b.jsx)($,{formData:a,handleChange:function(e){var t=e.target;c((function(e){return Object(Z.a)(Object(Z.a)({},e),{},Object(X.a)({},t.name,t.value))}))},handleSubmit:m})]})]})};var te=function(e){var t=e.formData,r=e.handleNameChange,n=e.handleCapacityChange,a=e.handleSubmit,c=Object(i.g)();return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:a,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"form-label mr-2",htmlFor:"table_name",children:"Table Name:"}),Object(b.jsx)("input",{type:"text",id:"table_name",className:"form-control",name:"table_name",onChange:r,value:t.table_name,required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"form-label mr-2",htmlFor:"capacity",children:"Table Capacity:"}),Object(b.jsx)("input",{type:"number",id:"capacity",className:"form-control",name:"capacity",min:"1",onChange:n,value:t.capacity,required:!0})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary mr-1 mb-3",children:"Submit"}),Object(b.jsx)("button",{type:"button",onClick:function(){return c.goBack()},className:"btn btn-secondary mr-1 mb-3",children:"Cancel"})]})})};var re=function(){var e=Object(i.g)(),t=Object(n.useState)(Object(Z.a)({},{table_name:"",capacity:"1"})),r=Object(h.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(!1),l=Object(h.a)(s,2),o=l[0],j=l[1],m=function(){var t=Object(d.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),n=new AbortController,t.prev=2,t.next=5,F(a,n.signal);case 5:e.push("/dashboard"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),j(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Create a Table"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(z,{error:o}),Object(b.jsx)(te,{formData:a,handleNameChange:function(e){var t=e.target;c((function(e){return Object(Z.a)(Object(Z.a)({},e),{},Object(X.a)({},t.name,t.value))}))},handleCapacityChange:function(e){var t=e.target;c((function(e){return Object(Z.a)(Object(Z.a)({},e),{},Object(X.a)({},t.name,Number(t.value)))}))},handleSubmit:m})]})]})};var ne=function(e){var t=e.tables,r=e.handleSubmit,n=e.handleChange,a=Object(i.g)();return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:r,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Select Table:"}),Object(b.jsxs)("select",{name:"table_id",onChange:n,children:[Object(b.jsx)("option",{value:"",children:"Table Name - Capacity"}),t.map((function(e){return Object(b.jsxs)("option",{value:JSON.stringify(e),require:!0,children:[e.table_name," - ",e.capacity]},e.table_id)}))]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-primary mr-1 mb-3",type:"submit",children:"Submit"}),Object(b.jsx)("button",{className:"btn btn-secondary mr-1 mb-3",type:"button",onClick:function(){return a.goBack()},children:"Cancel"})]})]})})};var ae=function(){var e=Object(i.i)().reservation_id,t=Object(i.g)(),r=Object(n.useState)([]),a=Object(h.a)(r,2),c=a[0],s=a[1],l=Object(n.useState)([]),o=Object(h.a)(l,2),j=o[0],m=o[1],O=Object(n.useState)({}),p=Object(h.a)(O,2),x=p[0],v=p[1],f=Object(n.useState)({}),N=Object(h.a)(f,2),g=N[0],y=N[1],_=Object(n.useState)([]),w=Object(h.a)(_,2),S=w[0],C=w[1],D=function(){var r=Object(d.a)(u.a.mark((function r(n){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,a=JSON.parse(x),r.next=5,E(a.table_id,e);case 5:return r.sent.status="Occupied",r.next=9,L(e,"seated");case 9:t.push("/dashboard"),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),m(r.t0);case 15:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e){return r.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=new AbortController;return m(null),M(e.signal).then(s).catch(m),function(){return e.abort()}}),[]),Object(n.useEffect)((function(){var t=new AbortController;return C(null),k(e,t.signal).then(y).catch(C),function(){return t.abort()}}),[e]),c?Object(b.jsxs)("main",{children:[Object(b.jsx)("h1",{children:"Seat Reservation"}),Object(b.jsxs)("h3",{children:["Reservation ID: ",e," Party Size: ",g.people]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(z,{error:j}),Object(b.jsx)(z,{error:S}),Object(b.jsx)(ne,{tables:c,handleSubmit:D,handleChange:function(e){var t=e.target;v(t.value)}})]})]}):Object(b.jsx)("div",{children:Object(b.jsx)("h3",{children:"There are no tables currently available."})})};var ce=function(e){var t=e.formData,r=e.handleChange,n=e.handleSubmit,a=Object(i.g)();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("form",{children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"mobile_number",children:"Mobile Number:"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"text",id:"mobile_number",className:"form-control",name:"mobile_number",onChange:r,value:t.mobile_number,required:!0})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-primary mr-1 mb-3",type:"submit",onClick:function(e){return n(e)},children:"Find"}),Object(b.jsx)("button",{className:"btn btn-secondary mr-1 mb-3",type:"button",onClick:function(){return a.goBack()},children:"Cancel"})]})]})})})};var se=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(Object(Z.a)({},{mobile_number:" "})),s=Object(h.a)(c,2),i=s[0],l=s[1],o=Object(n.useState)([]),j=Object(h.a)(o,2),m=j[0],O=j[1],p=Object(n.useState)(!1),x=Object(h.a)(p,2),v=x[0],f=x[1],N=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r=i.mobile_number,e.next=5,I(r);case 5:n=e.sent,a(n),f(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),O(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("main",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Search by Mobile Number"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(ce,{formData:i,handleChange:function(e){var t=e.target;l((function(e){return Object(Z.a)(Object(Z.a)({},e),{},Object(X.a)({},t.name,t.value))}))},handleSubmit:N}),m.length>0&&Object(b.jsx)(z,{error:m}),r.length>0&&Object(b.jsx)(K,{reservations:r}),v&&r.length<=0&&"No reservations found for mobile number: ".concat(i.mobile_number)]})]})};var ie=function(){var e=Object(i.i)().reservation_id,t=Object(i.g)(),r=Object(n.useState)(null),a=Object(h.a)(r,2),c=a[0],s=a[1],l=Object(n.useState)(Object(Z.a)({},{first_name:"",last_name:"",mobile_number:"",reservation_date:"",reservation_time:"",people:"",status:""})),o=Object(h.a)(l,2),j=o[0],m=o[1],O=Object(n.useState)(null),p=Object(h.a)(O,2),x=p[0],v=p[1];Object(n.useEffect)((function(){var t=new AbortController;return s(null),k(e,t.signal).then((function(e){return m({first_name:e.first_name,last_name:e.last_name,mobile_number:e.mobile_number,reservation_date:e.reservation_date.slice(0,10),reservation_time:e.reservation_time.slice(0,5),people:e.people,status:e.status})})).catch(s),function(){return t.abort()}}),[e]);var f=function(){var r=Object(d.a)(u.a.mark((function r(n){var a,c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),v(null),a=new AbortController,r.prev=3,r.next=6,B(e,j,a.signal);case 6:c=r.sent,t.push("/dashboard/?date=".concat(c.reservation_date.slice(0,10))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),v(r.t0);case 13:case"end":return r.stop()}}),r,null,[[3,10]])})));return function(e){return r.apply(this,arguments)}}();return Object(b.jsxs)("main",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Edit Reservation"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(z,{error:x}),Object(b.jsx)(z,{error:c})]}),Object(b.jsx)("div",{children:Object(b.jsx)($,{formData:j,handleChange:function(e){var t=e.target;m((function(e){return Object(Z.a)(Object(Z.a)({},e),{},Object(X.a)({},t.name,t.value))}))},handleSubmit:f})})]})};var le=function(){return Object(b.jsxs)(i.d,{children:[Object(b.jsx)(i.b,{exact:!0,path:"/",children:Object(b.jsx)(i.a,{to:"/dashboard"})}),Object(b.jsx)(i.b,{exact:!0,path:"/reservations/new",children:Object(b.jsx)(ee,{})}),Object(b.jsx)(i.b,{exact:!0,path:"/reservations",children:Object(b.jsx)(i.a,{to:"/dashboard"})}),Object(b.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/seat",children:Object(b.jsx)(ae,{})}),Object(b.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/edit",children:Object(b.jsx)(ie,{})}),Object(b.jsx)(i.b,{path:"/dashboard",children:Object(b.jsx)(V,{date:p()})}),Object(b.jsx)(i.b,{exact:!0,path:"/tables/new",children:Object(b.jsx)(re,{})}),Object(b.jsx)(i.b,{exact:!0,path:"/search",children:Object(b.jsx)(se,{})}),Object(b.jsx)(i.b,{children:Object(b.jsx)(W,{})})]})};r(35);var be=function(){return Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsxs)("div",{className:"row h-100",children:[Object(b.jsx)("div",{className:"col-md-2 side-bar",children:Object(b.jsx)(o,{})}),Object(b.jsx)("div",{className:"col",children:Object(b.jsx)(le,{})})]})})};var oe=function(){return Object(b.jsx)(i.d,{children:Object(b.jsx)(i.b,{path:"/",children:Object(b.jsx)(be,{})})})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(l.a,{children:Object(b.jsx)(oe,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.b3663237.chunk.js.map